<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>hahami</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', cursive;
            background: linear-gradient(135deg, #d4fc79, #96e6a1, #84fab0);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            overflow-y: auto;
            padding: 10px;
            -webkit-overflow-scrolling: touch;
        }
        
        .container {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px 15px;
            max-width: 95%;
            width: 100%;
            text-align: center;
            box-shadow: 0 10px 25px rgba(120, 200, 140, 0.3);
            border: 5px solid #4CAF50;
            position: relative;
            z-index: 1;
            margin: 10px 0;
        }
        
        h1 {
            color: #2e7d32;
            font-size: clamp(1.8em, 6vw, 2.8em);
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(165, 214, 167, 0.5);
            line-height: 1.2;
        }
        
        .question {
            font-size: clamp(1.5em, 5vw, 2.2em);
            color: #1b5e20;
            margin-bottom: 25px;
            font-weight: bold;
            padding: 8px;
            background: linear-gradient(45deg, #e8f5e9, #c8e6c9);
            border-radius: 12px;
            line-height: 1.3;
        }
        
        .question2 {
            font-size: clamp(1.3em, 4.5vw, 1.8em);
            color: #1b5e20;
            margin-bottom: 20px;
            font-weight: bold;
            padding: 8px;
            background: linear-gradient(45deg, #f1f8e9, #dcedc8);
            border-radius: 10px;
            line-height: 1.3;
            display: none;
        }
        
        .buttons-container {
            position: relative;
            min-height: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }
        
        .buttons-wrapper {
            position: relative;
            width: 100%;
            height: 150px;
        }
        
        .mood-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
            display: none;
        }
        
        .next-btn-container {
            margin-top: 25px;
            display: none;
        }
        
        .next-btn {
            padding: 12px 35px;
            font-size: clamp(1.2em, 4vw, 1.6em);
            border: none;
            border-radius: 40px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            background: linear-gradient(45deg, #2196F3, #03A9F4);
            color: white;
            box-shadow: 0 4px 10px rgba(33, 150, 243, 0.4);
            min-width: 200px;
            white-space: nowrap;
        }
        
        .next-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(33, 150, 243, 0.6);
        }
        
        .mood-btn {
            padding: 12px 30px;
            font-size: clamp(1.2em, 4vw, 1.6em);
            border: none;
            border-radius: 40px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            min-width: 140px;
            white-space: nowrap;
        }
        
        .good-btn {
            background: linear-gradient(45deg, #4CAF50, #8BC34A);
            color: white;
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.4);
        }
        
        .bad-btn {
            background: linear-gradient(45deg, #ff9800, #ffc107);
            color: white;
            box-shadow: 0 4px 10px rgba(255, 152, 0, 0.4);
        }
        
        .mood-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
        
        .yes-btn {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 50%;
            margin-top: -25px;
            z-index: 20;
            padding: 12px 25px;
            font-size: clamp(1.3em, 4vw, 1.8em);
            border: none;
            border-radius: 40px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            background: linear-gradient(45deg, #2e7d32, #4CAF50);
            color: white;
            box-shadow: 0 4px 10px rgba(46, 125, 50, 0.4);
            min-width: 120px;
            width: auto;
            white-space: nowrap;
        }
        
        .yes-btn:hover {
            transform: translateX(-50%) scale(1.05);
            box-shadow: 0 6px 15px rgba(46, 125, 50, 0.6);
        }
        
        .no-btn {
            position: absolute;
            padding: 12px 25px;
            font-size: clamp(1.3em, 4vw, 1.8em);
            border: none;
            border-radius: 40px;
            cursor: pointer;
            transition: all 0.1s;
            font-weight: bold;
            background: linear-gradient(45deg, #d32f2f, #f57c00);
            color: white;
            box-shadow: 0 4px 10px rgba(211, 47, 47, 0.4);
            z-index: 10;
            min-width: 120px;
            width: auto;
            white-space: nowrap;
        }
        
        .message {
            font-size: clamp(1.3em, 4vw, 1.8em);
            color: #1b5e20;
            margin-top: 20px;
            padding: 12px;
            background-color: #c8e6c9;
            border-radius: 12px;
            display: none;
            animation: fadeIn 0.5s;
            line-height: 1.4;
        }
        
        .mood-message {
            font-size: clamp(1.2em, 3.5vw, 1.6em);
            color: #1b5e20;
            margin-top: 15px;
            padding: 10px;
            background-color: #e8f5e9;
            border-radius: 10px;
            display: none;
            animation: fadeIn 0.5s;
            line-height: 1.4;
        }
        
        .to-congrats-btn-container {
            margin-top: 25px;
            display: none;
        }
        
        .to-congrats-btn {
            padding: 15px 40px;
            font-size: clamp(1.2em, 4vw, 1.6em);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            background: linear-gradient(45deg, #4CAF50, #8BC34A);
            color: white;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
            min-width: 250px;
            white-space: nowrap;
            border: 2px solid white;
        }
        
        .to-congrats-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.6);
        }
        
        .congrats-container {
            display: none;
            animation: fadeIn 1s ease;
        }
        
        .congrats-title {
            font-size: clamp(2em, 8vw, 3.5em);
            color: #2e7d32;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(76, 175, 80, 0.3);
        }
        
        .congrats-text {
            font-size: clamp(1.2em, 4vw, 1.8em);
            color: #1b5e20;
            line-height: 1.6;
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(45deg, #fff, #f1f8e9);
            border-radius: 20px;
            border: 3px solid #4CAF50;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .reset-btn {
            padding: 15px 40px;
            font-size: clamp(1.1em, 4vw, 1.5em);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            background: linear-gradient(45deg, #2196F3, #03A9F4);
            color: white;
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4);
            margin-top: 30px;
        }
        
        .reset-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(33, 150, 243, 0.6);
        }
        
        .congrats-message {
            background: white;
            padding: 25px;
            border-radius: 20px;
            margin: 20px 0;
            border: 3px dashed #4CAF50;
        }
        
        .congrats-footer {
            margin-top: 30px;
            font-size: 1.2em;
            color: #2e7d32;
            font-style: italic;
        }

        .to-heart-btn-container {
            margin-top: 30px;
        }
        
        .to-heart-btn {
            padding: 15px 40px;
            font-size: clamp(1.2em, 4vw, 1.8em);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            background: linear-gradient(45deg, #ff4da6, #e6005c);
            color: white;
            box-shadow: 0 5px 20px rgba(255, 0, 102, 0.5);
            min-width: 280px;
            white-space: nowrap;
            border: 2px solid white;
            animation: pulse 2s infinite;
        }
        
        .to-heart-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(255, 0, 102, 0.8);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* –°–¢–ò–õ–ò –î–õ–Ø –†–ò–°–û–í–ê–ù–ò–Ø –°–ï–†–î–¶–ê */
        .heart-container {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            background: linear-gradient(135deg, #1a001a, #33001a, #1a0000);
            padding: 25px 15px;
            border-radius: 20px;
            border: 5px solid #ff1a75;
            box-shadow: 0 0 50px rgba(255, 0, 102, 0.3);
            position: relative;
            overflow: visible;
        }
        
        .heart-container h1, 
        .heart-container h2, 
        .heart-container h3 {
            color: #ff99cc;
            text-shadow: 0 0 20px #ff0066;
            position: relative;
            z-index: 5;
        }
        
        /* –°–¢–ò–õ–ò –î–õ–Ø –§–û–¢–û–ì–†–ê–§–ò–ô */
        .heart-photo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 4px solid #ff4da6;
            box-shadow: 0 0 30px rgba(255, 0, 102, 0.8);
            object-fit: cover;
            animation: photoGlow 3s infinite;
            background: linear-gradient(45deg, #ff99cc, #ff1a75);
            padding: 3px;
            display: block;
            transition: transform 0.3s ease;
        }
        
        .heart-photo:hover {
            transform: scale(1.1);
            border-color: #ffb3d9;
        }
        
        @keyframes photoGlow {
            0% { box-shadow: 0 0 20px rgba(255, 0, 102, 0.6); border-color: #ff4da6; }
            50% { box-shadow: 0 0 40px rgba(255, 0, 102, 1); border-color: #ffb3d9; }
            100% { box-shadow: 0 0 20px rgba(255, 0, 102, 0.6); border-color: #ff4da6; }
        }
        
        /* –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        @media (max-width: 768px) {
            .heart-photo {
                width: 80px;
                height: 80px;
            }
        }
        
        @media (max-width: 480px) {
            .heart-photo {
                width: 70px;
                height: 70px;
            }
        }
        
        #heartCanvas {
            border: 2px solid #ff4da6;
            border-radius: 15px;
            background: black;
            box-shadow: 0 0 50px rgba(255, 0, 102, 0.7);
            max-width: 100%;
            height: auto;
            position: relative;
            z-index: 3;
        }
        
        .heart-timer {
            color: #ffb3d9;
            font-size: clamp(24px, 6vw, 36px);
            font-weight: bold;
            margin-top: 15px;
            text-shadow: 0 0 20px #ff1a75;
            background: rgba(50, 0, 20, 0.9);
            padding: 12px 35px;
            border-radius: 60px;
            border: 2px solid #ff66a3;
            letter-spacing: 5px;
            box-shadow: 0 0 30px rgba(255, 0, 102, 0.5);
            position: relative;
            z-index: 5;
        }

        .heart-progress-bar {
            width: 100%;
            max-width: 700px;
            height: 12px;
            background: #2a0010;
            border-radius: 15px;
            margin-top: 20px;
            overflow: hidden;
            border: 1px solid #ff4da6;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
            position: relative;
            z-index: 5;
        }

        .heart-progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff99cc, #ff1a75, #e6005c);
            transition: width 0.05s linear;
            box-shadow: 0 0 30px #ff0066;
        }

        .heart-info {
            margin-top: 25px;
            color: #ffccdd;
            font-size: 20px;
            text-shadow: 0 0 15px #ff3399;
            background: rgba(80, 0, 30, 0.7);
            padding: 12px 25px;
            border-radius: 40px;
            border: 1px solid #ff66a3;
            font-weight: bold;
            position: relative;
            z-index: 5;
        }

        .heart-music-controls {
            margin-top: 25px;
            display: flex;
            gap: 15px;
            align-items: center;
            background: rgba(100, 0, 40, 0.8);
            padding: 20px 25px;
            border-radius: 60px;
            border: 2px solid #ff3385;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 100%;
            box-shadow: 0 0 30px rgba(255, 0, 102, 0.3);
            position: relative;
            z-index: 5;
        }

        .heart-btn {
            padding: 12px 28px;
            font-size: 17px;
            background: linear-gradient(45deg, #ff1a75, #b30059);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
            border: 1px solid #ffb3d9;
            text-shadow: 0 0 10px rgba(255,255,255,0.5);
        }

        .heart-btn:hover {
            background: linear-gradient(45deg, #ff3385, #cc0066);
            transform: scale(1.08);
            box-shadow: 0 0 30px #ff1a75;
            border: 1px solid white;
        }

        .heart-back-btn {
            margin-top: 20px;
            background: linear-gradient(45deg, #660033, #330019);
            border: 1px solid #ff99cc;
        }
        
        .heart-volume-slider {
            width: 100px;
            accent-color: #ff1a75;
            background: #1a000a;
            border-radius: 10px;
        }
        
        .heart-footer {
            margin-top: 20px;
            color: #ffb3d9;
            font-size: 16px;
            text-shadow: 0 0 10px #ff0066;
            position: relative;
            z-index: 5;
        }
        
        @keyframes heartPulse {
            0% { box-shadow: 0 0 30px rgba(255, 0, 102, 0.5); }
            50% { box-shadow: 0 0 70px rgba(255, 0, 102, 0.9); }
            100% { box-shadow: 0 0 30px rgba(255, 0, 102, 0.5); }
        }
        
        .heart-canvas-container {
            animation: heartPulse 3s infinite;
            border-radius: 20px;
            position: relative;
            z-index: 3;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .counter {
            font-size: clamp(1em, 3.5vw, 1.2em);
            color: #2e7d32;
            margin-top: 12px;
            font-weight: bold;
            padding: 0 5px;
        }
        
        .instructions {
            margin-top: 15px;
            color: #4CAF50;
            font-size: clamp(0.9em, 3vw, 1.1em);
            font-style: italic;
            padding: 0 5px;
        }
        
        button {
            -webkit-tap-highlight-color: transparent;
            -webkit-appearance: none;
        }
    </style>
</head>
<body>
    
    <div class="container" id="mainContainer">
        <!-- –û–°–ù–û–í–ù–ê–Ø –í–ê–õ–ï–ù–¢–ò–ù–ö–ê -->
        <div id="valentineContent">
            <h1>–ø—Ä–∏–≤–µ—Ç –¢–æ—à!</h1>
            
            <div class="question" id="question1">
                –ú–æ–∂–µ—Ç —Å—Ö–æ–¥–∏–º  –ø–æ–≥—É–ª—è—Ç—å?
            </div>
            
            <div class="question2" id="question2">
                –õ–∞–¥–Ω–æ —à—É—á—É –æ—Ç–≤–µ—Ç—å —Ç–∞–∫ –∫–∞–∫ —Ö–æ—á–µ—à—å
            </div>
            
            <div class="buttons-container" id="loveButtons">
                <div class="buttons-wrapper" id="buttonsWrapper">
                    <button class="yes-btn" id="yesBtn">–ö–æ–Ω–µ—á–Ω–æ!</button>
                </div>
            </div>
            
            <div class="next-btn-container" id="nextBtnContainer">
                <button class="next-btn" id="nextBtn">–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å ‚Üí</button>
            </div>
            
            <div class="mood-buttons" id="moodButtons">
                <button class="mood-btn good-btn" id="goodBtn">–î–∞–≤–∞–π üòä</button>
                <button class="mood-btn bad-btn" id="badBtn">–ú–Ω–µ –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è üòî</button>
            </div>
            
            <div class="message" id="message">
                –£—Ö —Ç—ã –Ω–µ –¥—É–º–∞–ª —á—Ç–æ —Ç—ã —Ç–∞–∫ –±—ã—Å—Ç—Ä–æ —Å–æ–≥–ª–∞—Å–∏—à—å—Å—è)!<br>
                –ö—É–¥–∞ —Å—Ö–æ–¥–∏–º?
            </div>
            
            <div class="mood-message" id="goodMessage">
                –ê —ç—Ç–æ –∏ –ø—Ä–∞–≤–¥–∞ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ —É–≤–∏–¥–µ—Ç—å üéâ<br>
                –î–∞–≤–∞–π —Ç–æ–≥–¥–∞ –æ–±—Å—É–¥–∏–º –∫—É–¥–∞ –∏ –∫–æ–≥–¥–∞ –º–æ–∂–Ω–æ —Å—Ö–æ–¥–∏—Ç—å
            </div>
            
            <div class="mood-message" id="badMessage">
                –ù–µ—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ üò¢<br>
                –ì–ª–∞–≤–Ω–æ–µ –Ω–∞–ø–∏—à–∏ –≤ —á–∞—Ç–µ —á—Ç–æ —Ç—ã –Ω–µ —Å–æ–≥–ª–∞—Å–Ω–∞<br>
                
            </div>
            
            <div class="to-congrats-btn-container" id="toCongratsBtnContainer">
                <button class="to-congrats-btn" id="toCongratsBtn">–°–æ–≤—Å–µ–º –Ω–µ–º–Ω–æ–≥–æ –¥—É—à–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞</button>
            </div>
            
            <div class="counter" id="counter">
                –ü–æ–ø—ã—Ç–æ–∫ –Ω–∞–∂–∞—Ç—å "–ù–µ—Ç": <span id="count">0</span>
            </div>
            
            <div class="instructions" id="instructions">
                –ü–æ–ø—Ä–æ–±—É–π –Ω–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "–ù–µ—Ç" üòâ
            </div>
        </div>
        
        <!-- –ü–û–ó–î–†–ê–í–ò–¢–ï–õ–¨–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê -->
        <div id="congratsContent" class="congrats-container">
            <h1 class="congrats-title">–í–æ—Ç —Ç–∞–∫ –≤–æ—Ç</h1>
            
            <div class="congrats-message">
                <div class="congrats-text">
                    <strong>–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –Ω–∞–≤–µ—Ä–Ω–æ–µ</strong><br><br>
                    –ù–æ —è –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å–ø–æ–∫–æ–∏–ª—Å—è –∏ —á–µ—Å—Ç–Ω–æ —Å–æ—Å–∫—É—á–∏–ª—Å—è –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å<br>
                    –ù–µ –ø–æ–¥—É–º–∞–π –≥–ª–∞–≤–Ω–æ–µ –Ω–µ—á–µ–≥–æ —Ç–∞–∫–æ–≥–æ —è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ –¥—Ä—É–∂–µ—Å–∫–∏ –ø—Ä–∏–≥–ª–∞—à–∞—é –ø—Ä–æ–≥—É–ª—è—Ç—å—Å—è<br><br>
                    –ù–∞–ø—Ä—è–º—É—é –≤ —á–∞—Ç–µ –Ω–µ –∑–∞—Ö–æ—Ç–µ–ª –ø–∏—Å–∞—Ç—å —Ä–µ—à–∏–ª —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ —Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–µ –¥–ª—è —Ç–µ–±—è<br>
                    –ö–∞–∫ –∏ —Ç—ã —Å—Ç–∞—Ä–∞–ª–∞—Å—å –¥–ª—è –º–µ–Ω—è –¥–µ–ª–∞—Ç—å —á—Ç–æ —Ç–æ –Ω–µ–æ–±—ã—á–Ω–æ–µ<br><br>
                    –¢–∞–∫ —á—Ç–æ –Ω–∞–¥–µ—é—Å—å –Ω–µ –æ—Ç–∫–∞–∂–µ—à—å—Å—è<br><br>
                    <span style="font-size: 0.9em;">–Ω–∞–ø–∏—à–∏ –≤ —á–∞—Ç–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å –∏–ª–∏ –Ω–µ –æ—á–µ–Ω—å</span>
                </div>
            </div>
            
            <div class="congrats-footer">
                
            </div>
            
            <div class="to-heart-btn-container">
                <button class="to-heart-btn" id="toHeartBtn">–ü—Ä–∏–∫–æ–ª—é—Ö–∞ –¥–ª—è —Ç–µ–±—è</button>
            </div>
            
            <button class="reset-btn" id="resetBtn">‚Ü∫ –ù–∞—á–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞</button>
        </div>
        
        <!-- –°–¢–†–ê–ù–ò–¶–ê –° –†–ò–°–û–í–ê–ù–ò–ï–ú –°–ï–†–î–¶–ê -->
        <div id="heartContent" class="heart-container">
            <h1 style="color: #ffb3d9; text-shadow: 0 0 20px #ff1a75; margin-bottom: 15px;">–ü–æ–º–Ω–∏—à—å??</h1>
            
            <!-- –§–û–¢–û 1: –ü–†–ê–í–´–ô –ù–ò–ñ–ù–ò–ô –£–ì–û–õ -->
            <div style="position: absolute; bottom: 20px; right: 20px; z-index: 20;">
                <img src="images/myphoto.jpg" alt="–§–æ—Ç–æ 1" class="heart-photo" id="heartPhoto1">
            </div>
            
            <!-- –§–û–¢–û 2: –õ–ï–í–´–ô –ù–ò–ñ–ù–ò–ô –£–ì–û–õ -->
            <div style="position: absolute; bottom: 20px; left: 20px; z-index: 20;">
                <img src="images/myphoto2.jpg" alt="–§–æ—Ç–æ 2" class="heart-photo" id="heartPhoto2">
            </div>
            
            <div class="heart-canvas-container">
                <canvas id="heartCanvas" width="800" height="800"></canvas>
            </div>
            
            <div class="heart-timer" id="timerDisplay">00:00 / 03:00</div>
            
            <div class="heart-progress-bar">
                <div id="progressFill" class="heart-progress-fill"></div>
            </div>
            
            <div class="heart-info" id="heartStatus">‚ù§Ô∏è –†–ò–°–û–í–ê–ù–ò–ï 3 –ú–ò–ù–£–¢–´ –ü–û–î –ú–£–ó–´–ö–£ ‚ù§Ô∏è</div>
            
            <div class="heart-music-controls">
                <button class="heart-btn" id="playPauseBtn">‚è∏ –ü–ê–£–ó–ê</button>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="color: #ffb3d9;">üîä</span>
                    <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="0.5" class="heart-volume-slider">
                </div>
            </div>
            
            <div style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; margin-top: 10px;">
                <button class="heart-btn heart-back-btn" id="backToCongratsBtn">‚óÄ –ù–∞–∑–∞–¥</button>
                <button class="heart-btn" id="fullResetBtn" style="background: linear-gradient(45deg, #b30059, #800040);">üîÑ –ù–ê–ß–ê–¢–¨ –°–ù–ê–ß–ê–õ–ê</button>
            </div>
            
            <div class="heart-footer">
                –ù–µ –∑–Ω–∞–ª —á—Ç–æ –º–æ–∂–Ω–æ –µ—â–µ —Å–¥–µ–ª–∞—Ç—å —Ä–µ—à–∏–ª –ø–æ–¥–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –º—É–∑—ã–∫–æ–π
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // –ö–û–î –î–õ–Ø –†–ò–°–û–í–ê–ù–ò–Ø –°–ï–†–î–¶–ê
        // ============================================
        
        const SONG_DURATION = 180;
        const TOTAL_STICKS = 7200;
        
        let audioElement;
        let isMusicPlaying = false;
        let isDrawingActive = true;
        let startTime = null;
        let pauseTime = null;
        let animationFrame;
        let sticks = [];
        let currentIndex = 0;
        
        const canvas = document.getElementById('heartCanvas');
        const ctx = canvas.getContext('2d');
        const centerX = 400;
        const centerY = 400;
        const heartSize = 180;

        function isInHeart(x, y) {
            const nx = (x - centerX) / heartSize;
            const ny = (centerY - y) / heartSize;
            const x2 = nx * nx;
            const y2 = ny * ny;
            const yMinusCbrt = ny - 0.6 * Math.pow(Math.abs(nx), 0.7);
            return (x2 + yMinusCbrt * yMinusCbrt) <= 1.0;
        }

        function generateSticks() {
            const sticks = [];
            
            for (let i = 0; i < TOTAL_STICKS; i++) {
                const angle = Math.random() * Math.PI * 4;
                const lengthFactor = 0.05 + Math.random() * 0.95;
                
                let maxRadius = heartSize;
                for (let r = 3; r < heartSize * 2; r += 2) {
                    const testX = centerX + Math.cos(angle) * r;
                    const testY = centerY - Math.sin(angle) * r;
                    if (!isInHeart(testX, testY)) {
                        maxRadius = r - 2;
                        break;
                    }
                }
                
                const radius = 3 + (maxRadius - 3) * lengthFactor;
                const endX = centerX + Math.cos(angle) * radius;
                const endY = centerY - Math.sin(angle) * radius;
                
                sticks.push({
                    startX: centerX,
                    startY: centerY,
                    endX: endX,
                    endY: endY,
                    length: Math.hypot(endX - centerX, endY - centerY),
                    weight: lengthFactor
                });
            }
            
            sticks.sort((a, b) => b.length - a.length);
            
            const longSticks = sticks.filter(s => s.length > heartSize * 0.7);
            const mediumSticks = sticks.filter(s => s.length <= heartSize * 0.7 && s.length > heartSize * 0.3);
            const shortSticks = sticks.filter(s => s.length <= heartSize * 0.3);
            
            for (let i = longSticks.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [longSticks[i], longSticks[j]] = [longSticks[j], longSticks[i]];
            }
            for (let i = mediumSticks.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [mediumSticks[i], mediumSticks[j]] = [mediumSticks[j], mediumSticks[i]];
            }
            for (let i = shortSticks.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shortSticks[i], shortSticks[j]] = [shortSticks[j], shortSticks[i]];
            }
            
            return [...longSticks, ...mediumSticks, ...shortSticks];
        }

        function drawStick(stick, progress) {
            const gradient = ctx.createLinearGradient(stick.startX, stick.startY, stick.endX, stick.endY);
            
            if (stick.length > heartSize * 0.7) {
                gradient.addColorStop(0, '#ff99cc');
                gradient.addColorStop(0.7, '#ff1a75');
            } else if (stick.length > heartSize * 0.3) {
                gradient.addColorStop(0, '#ffb3d9');
                gradient.addColorStop(0.7, '#ff4da6');
            } else {
                gradient.addColorStop(0, '#ffccdd');
                gradient.addColorStop(0.7, '#ff80bf');
            }
            
            ctx.beginPath();
            ctx.moveTo(stick.startX, stick.startY);
            ctx.lineTo(stick.endX, stick.endY);
            
            ctx.lineWidth = 0.8 + (stick.length / 200) * (0.5 + progress * 0.5);
            ctx.strokeStyle = gradient;
            ctx.stroke();
            
            if (progress > 0.3 && stick.length > heartSize * 0.5) {
                ctx.beginPath();
                ctx.arc(stick.endX, stick.endY, 1 + (progress * 1.2), 0, Math.PI * 2);
                ctx.fillStyle = '#ffe6f0';
                ctx.shadowBlur = 3 + progress * 8;
                ctx.shadowColor = '#ff1a75';
                ctx.fill();
                ctx.shadowBlur = 0;
            }
        }

        function animate() {
            if (!isDrawingActive) {
                animationFrame = requestAnimationFrame(animate);
                return;
            }
            
            if (!startTime) {
                animationFrame = requestAnimationFrame(animate);
                return;
            }
            
            const elapsed = (Date.now() - startTime) / 1000;
            const progress = Math.min(elapsed / SONG_DURATION, 1);
            
            const easedProgress = Math.pow(progress, 1.4);
            const targetIndex = Math.floor(easedProgress * sticks.length);
            
            while (currentIndex < targetIndex && currentIndex < sticks.length) {
                drawStick(sticks[currentIndex], progress);
                currentIndex++;
            }
            
            const mins = Math.floor(elapsed / 60);
            const secs = Math.floor(elapsed % 60);
            const timerDisplay = document.getElementById('timerDisplay');
            if (timerDisplay) {
                timerDisplay.innerHTML = 
                    `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')} / 03:00`;
            }
            
            const progressFill = document.getElementById('progressFill');
            if (progressFill) {
                progressFill.style.width = (progress * 100) + '%';
            }
            
            const heartStatus = document.getElementById('heartStatus');
            if (heartStatus) {
                if (currentIndex >= sticks.length) {
                    heartStatus.innerHTML = '‚ù§Ô∏è –°–ï–†–î–¶–ï –ì–û–¢–û–í–û! –¢–´ –£–í–ò–î–ï–õ(–ê) –í–°–Å ‚ù§Ô∏è';
                } else {
                    const visualProgress = Math.floor((currentIndex / sticks.length) * 100);
                    const secondsLeft = Math.floor((1 - progress) * 180);
                    heartStatus.innerHTML = `üéµ –†–ò–°–û–í–ê–ù–ò–ï: ${visualProgress}% | –û–°–¢–ê–õ–û–°–¨: ${secondsLeft}—Å`;
                }
            }
            
            animationFrame = requestAnimationFrame(animate);
        }

        function initAudio() {
            if (!audioElement) {
                audioElement = new Audio();
                audioElement.loop = false;
                audioElement.volume = 0.5;
                
                audioElement.addEventListener('play', function() {
                    isMusicPlaying = true;
                    isDrawingActive = true;
                    const playPauseBtn = document.getElementById('playPauseBtn');
                    if (playPauseBtn) playPauseBtn.innerHTML = '‚è∏ –ü–ê–£–ó–ê';
                    
                    if (pauseTime && startTime) {
                        const pauseDuration = Date.now() - pauseTime;
                        startTime += pauseDuration;
                        pauseTime = null;
                    } else if (!startTime) {
                        startTime = Date.now();
                    }
                });
                
                audioElement.addEventListener('pause', function() {
                    isMusicPlaying = false;
                    isDrawingActive = false;
                    pauseTime = Date.now();
                    const playPauseBtn = document.getElementById('playPauseBtn');
                    if (playPauseBtn) playPauseBtn.innerHTML = '‚ñ∂ –í–û–°–ü–†–û–ò–ó–í–ï–°–¢–ò';
                });
                
                audioElement.addEventListener('ended', function() {
                    isMusicPlaying = false;
                    isDrawingActive = false;
                    const playPauseBtn = document.getElementById('playPauseBtn');
                    if (playPauseBtn) playPauseBtn.innerHTML = '‚ñ∂ –í–û–°–ü–†–û–ò–ó–í–ï–°–¢–ò';
                });
            }
        }

        function playMusic() {
            initAudio();
            audioElement.src = 'song.mp3';
            
            audioElement.play()
                .then(() => {
                    isMusicPlaying = true;
                    isDrawingActive = true;
                    const playPauseBtn = document.getElementById('playPauseBtn');
                    if (playPauseBtn) playPauseBtn.innerHTML = '‚è∏ –ü–ê–£–ó–ê';
                    
                    if (pauseTime && startTime) {
                        const pauseDuration = Date.now() - pauseTime;
                        startTime += pauseDuration;
                        pauseTime = null;
                    } else if (!startTime) {
                        startTime = Date.now();
                    }
                })
                .catch(error => {
                    console.log('–û—à–∏–±–∫–∞:', error);
                });
        }

        function pauseMusic() {
            if (audioElement) {
                audioElement.pause();
                isMusicPlaying = false;
                isDrawingActive = false;
                pauseTime = Date.now();
                const playPauseBtn = document.getElementById('playPauseBtn');
                if (playPauseBtn) playPauseBtn.innerHTML = '‚ñ∂ –í–û–°–ü–†–û–ò–ó–í–ï–°–¢–ò';
            }
        }

        function togglePlayPause() {
            if (!audioElement) {
                initAudio();
            }
            
            if (isMusicPlaying) {
                pauseMusic();
            } else {
                playMusic();
            }
        }

        function fullReset() {
            cancelAnimationFrame(animationFrame);
            
            initAudio();
            
            if (audioElement) {
                audioElement.pause();
                audioElement.currentTime = 0;
                isMusicPlaying = false;
                isDrawingActive = false;
                const playPauseBtn = document.getElementById('playPauseBtn');
                if (playPauseBtn) playPauseBtn.innerHTML = '‚ñ∂ –í–û–°–ü–†–û–ò–ó–í–ï–°–¢–ò';
            }
            
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.beginPath();
            ctx.strokeStyle = '#0a0a0a';
            ctx.lineWidth = 0.3;
            for (let i = 0; i < 360; i+=30) {
                const angle = i * Math.PI / 180;
                for (let r = 3; r < heartSize; r += 5) {
                    const x = centerX + Math.cos(angle) * r;
                    const y = centerY - Math.sin(angle) * r;
                    if (isInHeart(x, y)) {
                        ctx.fillStyle = '#050505';
                        ctx.fillRect(x, y, 0.2, 0.2);
                    }
                }
            }
            
            sticks = generateSticks();
            currentIndex = 0;
            startTime = null;
            pauseTime = null;
            
            const timerDisplay = document.getElementById('timerDisplay');
            if (timerDisplay) timerDisplay.innerHTML = '00:00 / 03:00';
            
            const progressFill = document.getElementById('progressFill');
            if (progressFill) progressFill.style.width = '0%';
            
            const heartStatus = document.getElementById('heartStatus');
            if (heartStatus) heartStatus.innerHTML = '‚ù§Ô∏è –†–ò–°–û–í–ê–ù–ò–ï 3 –ú–ò–ù–£–¢–´ –ü–û–î –ú–£–ó–´–ö–£ ‚ù§Ô∏è';
            
            animate();
            
            setTimeout(() => {
                playMusic();
            }, 100);
        }

        function backToCongrats() {
            const heartContent = document.getElementById('heartContent');
            const congratsContent = document.getElementById('congratsContent');
            
            if (heartContent) heartContent.style.display = 'none';
            if (congratsContent) congratsContent.style.display = 'block';
            
            if (audioElement) {
                audioElement.pause();
                isMusicPlaying = false;
                isDrawingActive = false;
                const playPauseBtn = document.getElementById('playPauseBtn');
                if (playPauseBtn) playPauseBtn.innerHTML = '‚ñ∂ –í–û–°–ü–†–û–ò–ó–í–ï–°–¢–ò';
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ============================================
        // –û–°–ù–û–í–ù–û–ô –ö–û–î –í–ê–õ–ï–ù–¢–ò–ù–ö–ò
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const buttonsWrapper = document.getElementById('buttonsWrapper');
            const yesBtn = document.getElementById('yesBtn');
            const message = document.getElementById('message');
            const counterElement = document.getElementById('counter');
            const countElement = document.getElementById('count');
            const instructions = document.getElementById('instructions');
            
            const question1 = document.getElementById('question1');
            const question2 = document.getElementById('question2');
            const moodButtons = document.getElementById('moodButtons');
            const goodBtn = document.getElementById('goodBtn');
            const badBtn = document.getElementById('badBtn');
            const goodMessage = document.getElementById('goodMessage');
            const badMessage = document.getElementById('badMessage');
            const loveButtons = document.getElementById('loveButtons');
            const nextBtnContainer = document.getElementById('nextBtnContainer');
            const nextBtn = document.getElementById('nextBtn');
            
            const toCongratsBtnContainer = document.getElementById('toCongratsBtnContainer');
            const toCongratsBtn = document.getElementById('toCongratsBtn');
            
            const valentineContent = document.getElementById('valentineContent');
            const congratsContent = document.getElementById('congratsContent');
            const heartContent = document.getElementById('heartContent');
            const resetBtn = document.getElementById('resetBtn');
            const toHeartBtn = document.getElementById('toHeartBtn');
            
            let noButton = null;
            let escapeCount = 0;
            let isNoButtonActive = true;
            let loveAnswered = false;
            let moodAnswered = false;
            
            function getWrapperDimensions() {
                const rect = buttonsWrapper.getBoundingClientRect();
                return {
                    width: rect.width,
                    height: rect.height
                };
            }
            
            const dimensions = getWrapperDimensions();
            let wrapperWidth = dimensions.width;
            let wrapperHeight = dimensions.height;
            const buttonWidth = 120;
            const buttonHeight = 50;
            
            let avoidZone = {
                x: wrapperWidth / 2 - 110,
                y: wrapperHeight / 2 - 40,
                width: 220,
                height: 80
            };
            
            function updateDimensions() {
                const dims = getWrapperDimensions();
                wrapperWidth = dims.width;
                wrapperHeight = dims.height;
                
                avoidZone = {
                    x: wrapperWidth / 2 - Math.min(110, wrapperWidth/2 - 20),
                    y: wrapperHeight / 2 - 40,
                    width: Math.min(220, wrapperWidth - 40),
                    height: 80
                };
                
                if (noButton) {
                    positionNoButtonSafe();
                }
            }
            
            function createNoButton() {
                noButton = document.createElement('button');
                noButton.className = 'no-btn';
                noButton.id = 'noBtn';
                noButton.textContent = '–ù–µ—Ç';
                buttonsWrapper.appendChild(noButton);
                
                noButton.addEventListener('mouseover', moveNoButton);
                noButton.addEventListener('touchstart', function(e) {
                    if (e.touches.length === 1) {
                        moveNoButton(e);
                    }
                }, { passive: true });
                noButton.addEventListener('click', handleNoClick);
                
                positionNoButtonSafe();
            }
            
            function getSafePosition() {
                let attempts = 0;
                let maxAttempts = 50;
                const minMargin = 5;
                
                while (attempts < maxAttempts) {
                    let x = Math.random() * (wrapperWidth - buttonWidth - minMargin * 2) + minMargin;
                    let y = Math.random() * (wrapperHeight - buttonHeight - minMargin * 2) + minMargin;
                    
                    const buttonRect = {
                        x: x,
                        y: y,
                        width: buttonWidth,
                        height: buttonHeight
                    };
                    
                    if (!rectIntersect(buttonRect, avoidZone)) {
                        return { x, y };
                    }
                    
                    attempts++;
                }
                
                return {
                    x: Math.random() > 0.5 ? minMargin : wrapperWidth - buttonWidth - minMargin,
                    y: Math.random() * (wrapperHeight - buttonHeight - minMargin * 2) + minMargin
                };
            }
            
            function rectIntersect(rect1, rect2) {
                return !(rect1.x + rect1.width < rect2.x ||
                         rect2.x + rect2.width < rect1.x ||
                         rect1.y + rect1.height < rect2.y ||
                         rect2.y + rect2.height < rect1.y);
            }
            
            function positionNoButtonSafe() {
                if (!noButton) return;
                const safePos = getSafePosition();
                noButton.style.left = safePos.x + 'px';
                noButton.style.top = safePos.y + 'px';
            }
            
            function moveNoButton(event) {
                if (!isNoButtonActive || loveAnswered) return;
                
                escapeCount++;
                countElement.textContent = escapeCount;
                
                const safePos = getSafePosition();
                noButton.style.left = safePos.x + 'px';
                noButton.style.top = safePos.y + 'px';
                
                const scale = Math.max(0.5, 1 - escapeCount * 0.05);
                noButton.style.transform = `scale(${scale})`;
                
                const red = Math.min(255, 211 + escapeCount * 5);
                const green = Math.max(100, 47 - escapeCount * 3);
                const blue = Math.max(50, 47 - escapeCount * 2);
                noButton.style.background = `linear-gradient(45deg, rgb(${red}, ${green}, ${blue}), #f57c00)`;
                
                if (escapeCount >= 10) {
                    noButton.style.transform = 'scale(0.3)';
                    noButton.style.opacity = '0.7';
                }
            }
            
            function handleNoClick(event) {
                event.preventDefault();
                if (!isNoButtonActive || loveAnswered) return;
                
                isNoButtonActive = false;
                noButton.style.pointerEvents = 'none';
                noButton.style.opacity = '0.5';
                
                noButton.style.transition = 'all 0.5s';
                noButton.style.transform = 'scale(0) rotate(180deg)';
                
                setTimeout(() => {
                    noButton.style.transition = 'all 0.1s';
                    noButton.style.transform = 'scale(1) rotate(0deg)';
                    noButton.style.opacity = '1';
                    isNoButtonActive = true;
                    noButton.style.pointerEvents = 'auto';
                    positionNoButtonSafe();
                }, 1000);
            }
            
            yesBtn.addEventListener('click', function() {
                if (loveAnswered) return;
                
                loveAnswered = true;
                message.style.display = 'block';
                yesBtn.style.display = 'none';
                if (noButton) noButton.style.display = 'none';
                counterElement.style.display = 'none';
                instructions.style.display = 'none';
                
                nextBtnContainer.style.display = 'block';
                message.scrollIntoView({ behavior: 'smooth', block: 'center' });
            });
            
            nextBtn.addEventListener('click', function() {
                question1.style.display = 'none';
                loveButtons.style.display = 'none';
                message.style.display = 'none';
                nextBtnContainer.style.display = 'none';
                
                question2.style.display = 'block';
                moodButtons.style.display = 'flex';
                
                question2.scrollIntoView({ behavior: 'smooth', block: 'center' });
            });
            
            function showCongratsButton() {
                moodButtons.style.display = 'none';
                question2.style.display = 'none';
                
                toCongratsBtnContainer.style.display = 'block';
                toCongratsBtnContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            
            goodBtn.addEventListener('click', function() {
                if (moodAnswered) return;
                moodAnswered = true;
                
                goodMessage.style.display = 'block';
                showCongratsButton();
            });
            
            badBtn.addEventListener('click', function() {
                if (moodAnswered) return;
                moodAnswered = true;
                
                badMessage.style.display = 'block';
                showCongratsButton();
            });
            
            toCongratsBtn.addEventListener('click', function() {
                valentineContent.style.display = 'none';
                congratsContent.style.display = 'block';
                congratsContent.style.animation = 'fadeIn 1s ease';
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            resetBtn.addEventListener('click', function() {
                congratsContent.style.display = 'none';
                heartContent.style.display = 'none';
                valentineContent.style.display = 'block';
                
                loveAnswered = false;
                moodAnswered = false;
                escapeCount = 0;
                countElement.textContent = '0';
                
                question1.style.display = 'block';
                loveButtons.style.display = 'flex';
                yesBtn.style.display = 'block';
                counterElement.style.display = 'block';
                instructions.style.display = 'block';
                
                message.style.display = 'none';
                nextBtnContainer.style.display = 'none';
                question2.style.display = 'none';
                moodButtons.style.display = 'none';
                goodMessage.style.display = 'none';
                badMessage.style.display = 'none';
                toCongratsBtnContainer.style.display = 'none';
                
                if (noButton) {
                    noButton.style.display = 'block';
                    positionNoButtonSafe();
                }
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            toHeartBtn.addEventListener('click', function() {
                congratsContent.style.display = 'none';
                heartContent.style.display = 'flex';
                
                setTimeout(() => {
                    initAudio();
                    fullReset();
                }, 100);
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            yesBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                if (!loveAnswered) {
                    this.click();
                }
            }, { passive: false });
            
            nextBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.click();
            }, { passive: false });
            
            goodBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.click();
            }, { passive: false });
            
            badBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.click();
            }, { passive: false });
            
            toCongratsBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.click();
            }, { passive: false });
            
            resetBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.click();
            }, { passive: false });
            
            toHeartBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.click();
            }, { passive: false });
            
            createNoButton();
            updateDimensions();
            
            let resizeTimeout;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    updateDimensions();
                }, 100);
            });
            
            window.addEventListener('orientationchange', function() {
                setTimeout(() => {
                    updateDimensions();
                }, 300);
            });

            const playPauseBtn = document.getElementById('playPauseBtn');
            if (playPauseBtn) {
                playPauseBtn.addEventListener('click', togglePlayPause);
            }
            
            const volumeSlider = document.getElementById('volumeSlider');
            if (volumeSlider) {
                volumeSlider.addEventListener('input', function(e) {
                    if (audioElement) {
                        audioElement.volume = parseFloat(e.target.value);
                    }
                });
            }

            const backToCongratsBtn = document.getElementById('backToCongratsBtn');
            if (backToCongratsBtn) {
                backToCongratsBtn.addEventListener('click', backToCongrats);
            }

            const fullResetBtn = document.getElementById('fullResetBtn');
            if (fullResetBtn) {
                fullResetBtn.addEventListener('click', fullReset);
            }

            // –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —É–∂–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ HTML, –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ
        });
    </script>
</body>
</html>

        

